"use strict";(self.webpackChunkfrontend_contrataciones=self.webpackChunkfrontend_contrataciones||[]).push([[880],{90880:(we,q,s)=>{s.r(q),s.d(q,{ReportsModule:()=>Ee});var T=s(96814),i=s(56223),O=s(59303),Z=s(52787),J=s(11629),e=s(19212),A=s(59481),f=s(39371),S=s(23680),_=s(32296),u=s(95287),p=s(64170),I=s(30617),y=s(2032),x=s(87466),C=s(98525),U=s(71586),v=s(55226),l=s(49538),w=s(78365);function F(a,r){if(1&a&&(e.TgZ(0,"th",7),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.header)}}const k=(a,r,t)=>["/reportes",a,r,t];function Q(a,r){if(1&a&&(e.TgZ(0,"a",9),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit,n=e.oxw(2);e.Q6J("routerLink",e.kEZ(3,k,n.pageParams.path,t.group,t.id_procedure))("queryParams",n.pageParams.queryParams),e.xp6(1),e.hij(" ",t.code,"")}}function M(a,r){if(1&a&&(e.TgZ(0,"span",10),e.ALo(1,"state"),e._uU(2),e.qZA()),2&a){const t=e.oxw().$implicit;e.Q6J("ngClass",e.lcZ(1,2,t.state)),e.xp6(2),e.hij(" ",t.state," ")}}function Y(a,r){if(1&a&&(e._uU(0),e.ALo(1,"date")),2&a){const t=e.oxw().$implicit;e.hij(" ",e.Dn7(1,1,t.date,"short","-400")," ")}}function L(a,r){if(1&a&&e._uU(0),2&a){const t=e.oxw().$implicit,n=e.oxw().$implicit;e.hij(" ",t[n.columnDef]," ")}}function j(a,r){if(1&a&&(e.TgZ(0,"td",8),e.YNc(1,Q,2,7)(2,M,3,4)(3,Y,2,5)(4,L,1,1),e.qZA()),2&a){const t=r.$implicit,n=e.oxw().$implicit;let o;e.Q6J("id",t.id_procedure),e.xp6(1),e.um2(1,"code"===(o=n.columnDef)?1:"state"===o?2:"date"===o?3:4)}}function G(a,r){1&a&&(e.ynx(0,4),e.YNc(1,F,2,1,"th",5)(2,j,5,2,"td",6),e.BQk()),2&a&&e.s9C("matColumnDef",r.$implicit.columnDef)}function B(a,r){1&a&&e._UZ(0,"tr",11)}function $(a,r){1&a&&e._UZ(0,"tr",12)}function H(a,r){1&a&&(e.TgZ(0,"tr",13)(1,"td",14),e._uU(2,"No se encontraron resultados"),e.qZA()())}let D=(()=>{class a{set navigationParams(t){this.pageParams=t}set tableColumns(t){this.columns=t,this.displayedColumns=t.map(({columnDef:n})=>n)}constructor(){this.displayedColumns=[],this.columns=[],this.dataSource=[],this.showDetails=new e.vpe}static#e=this.\u0275fac=function(n){return new(n||a)};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-table-procedure"]],inputs:{dataSource:"dataSource",navigationParams:"navigationParams",tableColumns:"tableColumns"},outputs:{showDetails:"showDetails"},decls:6,vars:3,consts:[["mat-table","",3,"dataSource"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"id",4,"matCellDef"],["mat-header-cell",""],["mat-cell","",3,"id"],[1,"primary-link",3,"routerLink","queryParams"],[1,"badge",3,"ngClass"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell","p-3"]],template:function(n,o){1&n&&(e.TgZ(0,"table",0),e.SjG(1,G,3,1,"ng-container",4,e.ikw),e.YNc(3,B,1,0,"tr",1)(4,$,1,0,"tr",2)(5,H,3,0,"tr",3),e.qZA()),2&n&&(e.Q6J("dataSource",o.dataSource),e.wJu(1,o.columns),e.xp6(3),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns))},dependencies:[T.mk,Z.rH,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,l.Ee,T.uU,w.$],changeDetection:0})}return a})();function X(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"section")(1,"label"),e._uU(2,"SOLICITANTE: "),e.qZA(),e.TgZ(3,"mat-radio-group",17),e.NdJ("change",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.typeApplicant.set(o.value))}),e.TgZ(4,"mat-radio-button",18),e._uU(5," NATURAL "),e.qZA(),e.TgZ(6,"mat-radio-button",19),e._uU(7," JURIDICO "),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.typeApplicant())}}function z(a,r){1&a&&(e.TgZ(0,"div",20)(1,"mat-form-field")(2,"mat-label"),e._uU(3,"Nombre"),e.qZA(),e._UZ(4,"input",21),e.qZA()(),e.TgZ(5,"div",22)(6,"mat-form-field")(7,"mat-label"),e._uU(8,"Paterno"),e.qZA(),e._UZ(9,"input",23),e.qZA()(),e.TgZ(10,"div",22)(11,"mat-form-field")(12,"mat-label"),e._uU(13,"Materno"),e.qZA(),e._UZ(14,"input",24),e.qZA()(),e.TgZ(15,"div",22)(16,"mat-form-field")(17,"mat-label"),e._uU(18,"Dni"),e.qZA(),e._UZ(19,"input",25),e.qZA()(),e.TgZ(20,"div",22)(21,"mat-form-field")(22,"mat-label"),e._uU(23,"Telefono"),e.qZA(),e._UZ(24,"input",26),e.qZA()(),e._UZ(25,"div",22))}function V(a,r){1&a&&(e.TgZ(0,"div",27)(1,"mat-form-field")(2,"mat-label"),e._uU(3,"Nombre"),e.qZA(),e._UZ(4,"input",21),e.qZA()(),e.TgZ(5,"div",27)(6,"mat-form-field")(7,"mat-label"),e._uU(8,"Telefono"),e.qZA(),e._UZ(9,"input",26),e.qZA()())}let K=(()=>{class a{constructor(t,n,o,c){this.fb=t,this.pdf=n,this.reportService=o,this.paginatorService=c,this.typeSearch=(0,e.tdS)("solicitante"),this.typeApplicant=(0,e.tdS)("NATURAL"),this.formApplicant=(0,e.Flj)(()=>"representante"===this.typeSearch()?this.buildFormByTypeRepresentative():"NATURAL"===this.typeApplicant()?this.buildFormByTypeApplicatNatural():this.buildFormByTypeApplicatJuridico()),this.datasource=(0,e.tdS)([]),this.displaycolums=[{columnDef:"code",header:"Alterno"},{columnDef:"reference",header:"Referencia"},{columnDef:"state",header:"Estado"},{columnDef:"applicant",header:"Solicitante"},{columnDef:"date",header:"Fecha"}],(0,e.f3M)(e.ktI).onDestroy(()=>{this.savePaginationData()})}ngOnInit(){this.loadPaginationData()}search(){const t=this.reportService.removeEmptyValuesFromObject(this.formApplicant().value);0===Object.keys(t).length&&"representante"===this.typeSearch()||Object.keys(t).length<=1&&"solicitante"===this.typeSearch()||this.reportService.searchProcedureByApplicant(this.paginatorService.PaginationParams,t,this.typeSearch()).subscribe(n=>{this.datasource.set(n.procedures),this.paginatorService.length=n.length},()=>this.datasource.set([]))}generateReport(){this.paginatorService.offset=0,this.search()}generatePDF(){this.pdf.generateReportSheet({title:"REPORTE: SOLICITANTE",datasource:this.datasource(),displayColumns:this.displaycolums})}buildFormByTypeApplicatNatural(){return this.fb.group({nombre:["",[i.kI.minLength(3)]],paterno:["",[i.kI.minLength(3)]],materno:["",[i.kI.minLength(3)]],telefono:["",[i.kI.minLength(7)]],dni:["",[i.kI.minLength(6)]],tipo:["NATURAL"]})}buildFormByTypeApplicatJuridico(){return this.fb.group({nombre:["",[i.kI.minLength(3)]],telefono:["",[i.kI.minLength(6)]],tipo:["JURIDICO"]})}buildFormByTypeRepresentative(){return this.fb.group({nombre:["",[i.kI.minLength(3)]],paterno:["",[i.kI.minLength(3)]],materno:["",[i.kI.minLength(3)]],telefono:["",[i.kI.minLength(7)]],dni:["",[i.kI.minLength(6)]]})}savePaginationData(){this.paginatorService.cache[this.constructor.name]={form:this.formApplicant().value,typeSearch:this.typeSearch(),typeApplicant:this.typeApplicant(),data:this.datasource()},this.paginatorService.keepAliveData=!1}loadPaginationData(){if(!this.paginatorService.keepAliveData||!this.paginatorService.cache[this.constructor.name])return void(this.paginatorService.length=0);const{data:t,form:n,typeApplicant:o,typeSearch:c}=this.paginatorService.cache[this.constructor.name];this.datasource.set(t),this.typeApplicant.set(o),this.typeSearch.set(c),this.formApplicant().patchValue(n)}get PageParams(){return{path:"solicitante",queryParams:this.paginatorService.PageParams}}static#e=this.\u0275fac=function(n){return new(n||a)(e.Y36(i.qu),e.Y36(A.mn),e.Y36(f.r),e.Y36(A.wW))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-applicant"]],decls:37,vars:9,consts:[["title","Reporte: Solicitante"],[1,"container","mb-3"],["expanded","true"],[1,"row"],[1,"col-12","mb-2"],[1,"col-sm-3"],[3,"value","selectionChange"],["value","solicitante"],["value","representante"],[1,"col-sm-9"],[3,"formGroup"],["mat-raised-button","",3,"disabled","click"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"example-container","mat-elevation-z8","mt-2"],[1,"table-container"],[3,"tableColumns","dataSource","navigationParams"],[3,"changePage"],[3,"ngModel","change"],["value","NATURAL"],["value","JURIDICO"],[1,"col-sm-4"],["matInput","","formControlName","nombre"],[1,"col-sm-2"],["matInput","","formControlName","paterno"],["matInput","","formControlName","materno"],["matInput","","formControlName","dni"],["matInput","","formControlName","telefono"],[1,"col-sm-6"]],template:function(n,o){1&n&&(e._UZ(0,"toolbar",0),e.TgZ(1,"div",1)(2,"mat-accordion")(3,"mat-expansion-panel",2)(4,"mat-expansion-panel-header")(5,"mat-panel-title"),e._uU(6,"DATOS SOLICITANTE / REPRESENTANTE "),e.qZA()(),e.TgZ(7,"div",3)(8,"div",4),e.YNc(9,X,8,1,"section"),e.qZA(),e.TgZ(10,"div",5)(11,"mat-form-field")(12,"mat-label"),e._uU(13,"BUSQUEDA POR:"),e.qZA(),e.TgZ(14,"mat-select",6),e.NdJ("selectionChange",function(m){return o.typeApplicant.set(m.value)}),e.TgZ(15,"mat-option",7),e._uU(16,"SOLICITANTE"),e.qZA(),e.TgZ(17,"mat-option",8),e._uU(18,"REPRESENTANTE"),e.qZA()()()(),e.TgZ(19,"div",9)(20,"form",10)(21,"div",3),e.YNc(22,z,26,0)(23,V,10,0),e.qZA()()()(),e.TgZ(24,"mat-action-row")(25,"button",11),e.NdJ("click",function(){return o.generatePDF()}),e.TgZ(26,"mat-icon"),e._uU(27,"print"),e.qZA(),e._uU(28," IMPRIMIR "),e.qZA(),e.TgZ(29,"button",12),e.NdJ("click",function(){return o.generateReport()}),e.TgZ(30,"mat-icon"),e._uU(31,"search"),e.qZA(),e._uU(32," BUSCAR "),e.qZA()()()(),e.TgZ(33,"div",13)(34,"div",14),e._UZ(35,"app-table-procedure",15),e.qZA(),e.TgZ(36,"app-paginator",16),e.NdJ("changePage",function(){return o.search()}),e.qZA()()()),2&n&&(e.xp6(9),e.um2(9,"solicitante"===o.typeSearch()?9:-1),e.xp6(5),e.Q6J("value",o.typeSearch),e.xp6(6),e.Q6J("formGroup",o.formApplicant()),e.xp6(2),e.um2(22,"NATURAL"===o.typeApplicant()?22:23),e.xp6(3),e.Q6J("disabled",0===o.datasource().length),e.xp6(4),e.Q6J("disabled",o.formApplicant().invalid),e.xp6(6),e.Q6J("tableColumns",o.displaycolums)("dataSource",o.datasource())("navigationParams",o.PageParams))},dependencies:[S.ey,_.lW,u.pp,u.ib,u.VG,u.yz,u.yK,p.KE,p.hX,I.Hw,y.Nt,x.VQ,x.U0,C.gD,i._Y,i.Fj,i.JJ,i.JL,i.On,i.sg,i.u,U.J,v.n,D],encapsulation:2,changeDetection:0})}return a})();var W=s(9638);function ee(a,r){if(1&a&&(e.TgZ(0,"h5",11),e._uU(1),e.ALo(2,"titlecase"),e.ALo(3,"fullname"),e.qZA(),e.TgZ(4,"h6",12),e._uU(5),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,2,e.lcZ(3,4,t._id.funcionario))),e.xp6(4),e.Oqu(null==t._id.funcionario.cargo?null:t._id.funcionario.cargo.nombre)}}function te(a,r){1&a&&(e.TgZ(0,"h5",11),e._uU(1,"SIN FUNCIONARIO"),e.qZA())}function ae(a,r){1&a&&e._uU(0," RECHAZADOS ")}function ne(a,r){1&a&&e._uU(0," PENDIENTES ")}function oe(a,r){1&a&&e._uU(0," RECIBIDOS ")}function ie(a,r){1&a&&e._uU(0," ARCHIVADOS ")}function re(a,r){if(1&a&&(e.TgZ(0,"li",13),e.YNc(1,ae,1,0)(2,ne,1,0)(3,oe,1,0)(4,ie,1,0),e.TgZ(5,"span",14),e._uU(6),e.qZA()()),2&a){const t=r.$implicit;let n;e.xp6(1),e.um2(1,"rejected"===(n=t.status)?1:"pending"===n?2:"received"===n?3:4),e.xp6(5),e.Oqu(t.total)}}function se(a,r){if(1&a&&(e.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8),e.YNc(5,ee,6,6)(6,te,2,0),e.qZA()(),e.TgZ(7,"div",9)(8,"ul",10),e.SjG(9,re,7,2,"li",15,e.ikw),e.qZA()()()()()),2&a){const t=r.$implicit;e.xp6(5),e.um2(5,t._id.funcionario?5:6),e.wJu(9,t.details)}}let ce=(()=>{class a{constructor(t){this.reportService=t,this.dependents=(0,e.tdS)([])}ngOnInit(){this.reportService.getDetailsDependentsByUnit().subscribe(t=>{this.dependents.set(t)})}static#e=this.\u0275fac=function(n){return new(n||a)(e.Y36(f.r))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-dependents"]],decls:6,vars:0,consts:[[1,"animate__animated","animate__fadeIn"],["title","Reporte: Dependientes"],[1,"container"],[1,"row","gy-2"],[1,"col-12"],[1,"card","bg-transparent","shadow-lg","p-3","bg-body-tertiary","rounded"],[1,"row"],[1,"col-8"],[1,"card-body"],[1,"col-4"],[1,"list-group"],[1,"card-title"],[1,"card-subtitle","mb-2","text-body-secondary"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"badge","bg-primary","rounded-pill"],["class","list-group-item d-flex justify-content-between align-items-center"],["class","col-12"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"toolbar",1),e.TgZ(2,"div",2)(3,"div",3),e.SjG(4,se,11,1,"div",16,e.ikw),e.qZA()()()),2&n&&e.wJu(4,o.dependents())},dependencies:[v.n,T.rS,W.J]})}return a})();var d=s(62966),h=s(38034),R=s(8929);function le(a,r){if(1&a&&(e.TgZ(0,"mat-option",21),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.text)}}function pe(a,r){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"Este campo es obligatorio"),e.qZA())}let me=(()=>{class a{constructor(t,n,o,c){this.fb=t,this.router=n,this.reportService=o,this.paginatorService=c,this.formSearch=this.fb.group({status:[""],account:[""],start:[null,i.kI.required],end:[new Date,i.kI.required]}),this.accounts=(0,e.tdS)([]),this.matSelectOptions=(0,e.Flj)(()=>this.accounts().map(m=>{const{funcionario:b}=m,Oe=b?[b.nombre,b.paterno,b.materno].filter(Je=>!!Je).join(" "):"POR DESIGNAR";return{value:m._id,text:Oe}})),this.datasource=(0,e.tdS)([]),this.displaycolums=[{columnDef:"code",header:"Alterno"},{columnDef:"reference",header:"Referencia"},{columnDef:"state",header:"Estado"},{columnDef:"date",header:"Ingreso"}],this.validStatus=[{value:d.Q.Pending,text:"PENDIENTES"},{value:d.Q.Received,text:"RECIBIDOS"},{value:d.Q.Rejected,text:"RECHAZADOS"},{value:d.Q.Archived,text:"ARCHIVADOS"},{value:d.Q.Completed,text:"ENVIADOS"}],(0,e.f3M)(e.ktI).onDestroy(()=>{this.savePaginationData(),this.paginatorService.length=0,this.paginatorService.keepAliveData=!1})}ngOnInit(){this.loadPaginationData()}search(){this.formSearch.invalid||this.reportService.searchProcedureByUnit({limit:this.paginatorService.limit,offset:this.paginatorService.offset},this.formSearch.value).subscribe(t=>{this.datasource.set(t.data),this.paginatorService.length=t.length})}generateReport(){this.paginatorService.offset=0,this.search()}getOfficersInMyDependency(){this.reportService.getOfficersInMyDependency().subscribe(t=>{this.accounts.set(t)})}selectMatSearchOption(t){this.formSearch.get("account")?.setValue(t)}showDetails(t){this.router.navigate(["reportes/unidad",t.group,t.id_procedure],{queryParams:{limit:this.paginatorService.limit,offset:this.paginatorService.index,search:!0}})}get currentSelectedOption(){return this.formSearch.get("account")?.value}savePaginationData(){this.paginatorService.cache[this.constructor.name]={accounts:this.accounts(),form:this.formSearch.value,length:this.paginatorService.length,data:this.datasource()}}loadPaginationData(){this.paginatorService.length=0;const t=this.paginatorService.cache[this.constructor.name];this.paginatorService.keepAliveData&&t?(this.accounts.set(t.accounts),this.datasource.set(t.data),this.formSearch.patchValue(t.form),this.paginatorService.length=t.length):this.getOfficersInMyDependency()}get PageParams(){return{path:"unidad",queryParams:this.paginatorService.PageParams}}static#e=this.\u0275fac=function(n){return new(n||a)(e.Y36(i.qu),e.Y36(Z.F0),e.Y36(f.r),e.Y36(A.wW))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-unit"]],decls:39,vars:11,consts:[[1,"animate__animated","animate__fadeIn"],["title","Reporte: Unidad"],[1,"container"],["expanded","true"],[3,"formGroup"],[1,"row"],[1,"col-sm-2"],["formControlName","status"],[1,"col-sm-6"],["placehorder","Seleccione un funcionario",3,"currentOption","options","required","selectEvent"],[1,"col-sm-4"],[3,"rangePicker"],["matStartDate","","formControlName","start","placeholder","Fecha inicial"],["matEndDate","","formControlName","end","placeholder","Fecha final"],["matIconSuffix","",3,"for"],["picker",""],["mat-button","","color","primary",3,"disabled","click"],[1,"example-container","mat-elevation-z8","mt-2"],[1,"table-container"],[3,"tableColumns","dataSource","navigationParams"],[3,"changePage"],[3,"value"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0),e._UZ(1,"toolbar",1),e.TgZ(2,"div",2)(3,"mat-accordion")(4,"mat-expansion-panel",3)(5,"mat-expansion-panel-header")(6,"mat-panel-title"),e._uU(7," PARAMETROS BUSQUEDA "),e.qZA()(),e.TgZ(8,"form",4)(9,"div",5)(10,"div",6)(11,"mat-form-field")(12,"mat-label"),e._uU(13,"Estado:"),e.qZA(),e.TgZ(14,"mat-select",7),e.SjG(15,le,2,2,"mat-option",21,e.ikw),e.qZA()()(),e.TgZ(17,"div",8)(18,"simple-mat-select-search",9),e.NdJ("selectEvent",function(m){return o.selectMatSearchOption(m)}),e.qZA()(),e.TgZ(19,"div",10)(20,"mat-form-field")(21,"mat-label"),e._uU(22,"Rango de ingreso"),e.qZA(),e.TgZ(23,"mat-date-range-input",11),e._UZ(24,"input",12)(25,"input",13),e.qZA(),e.TgZ(26,"mat-hint"),e._uU(27,"Seleccione un intervalo"),e.qZA(),e._UZ(28,"mat-datepicker-toggle",14)(29,"mat-date-range-picker",null,15),e.YNc(31,pe,2,0,"mat-error"),e.qZA()()(),e.TgZ(32,"mat-action-row")(33,"button",16),e.NdJ("click",function(){return o.generateReport()}),e._uU(34," BUSCAR "),e.qZA()()()()(),e.TgZ(35,"div",17)(36,"div",18),e._UZ(37,"app-table-procedure",19),e.qZA(),e.TgZ(38,"app-paginator",20),e.NdJ("changePage",function(){return o.search()}),e.qZA()()()()),2&n){const c=e.MAs(30);e.xp6(8),e.Q6J("formGroup",o.formSearch),e.wJu(15,o.validStatus),e.xp6(10),e.Q6J("currentOption",o.currentSelectedOption)("options",o.matSelectOptions())("required",!1),e.xp6(5),e.Q6J("rangePicker",c),e.xp6(5),e.Q6J("for",c),e.xp6(3),e.um2(31,o.formSearch.invalid?31:-1),e.xp6(2),e.Q6J("disabled",o.formSearch.invalid),e.xp6(4),e.Q6J("tableColumns",o.displaycolums)("dataSource",o.datasource())("navigationParams",o.PageParams)}},dependencies:[S.ey,_.lW,h.nW,h.wx,h.zY,h.By,h._g,u.pp,u.ib,u.VG,u.yz,u.yK,p.KE,p.hX,p.bx,p.TO,p.R9,C.gD,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,R._,U.J,v.n,D],changeDetection:0})}return a})();var g=s(7419),N=s(21476),P=s(13566);function ue(a,r){if(1&a&&(e.TgZ(0,"th",11),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.header)}}function de(a,r){if(1&a&&(e.TgZ(0,"td",12),e._uU(1),e.qZA()),2&a){const t=r.$implicit,n=e.oxw().$implicit;let o;e.xp6(1),e.Oqu(null!==(o=t[n.columnDef])&&void 0!==o?o:"----")}}function he(a,r){1&a&&(e.ynx(0,8),e.YNc(1,ue,2,1,"th",9)(2,de,2,1,"td",10),e.BQk()),2&a&&e.Q6J("matColumnDef",r.$implicit.columnDef)}function ge(a,r){1&a&&e._UZ(0,"tr",13)}function fe(a,r){1&a&&e._UZ(0,"tr",14)}function _e(a,r){if(1&a&&(e.TgZ(0,"tr",15)(1,"td",16),e._uU(2),e.qZA()()),2&a){e.oxw();const t=e.MAs(4);e.xp6(2),e.hij(" ",""!==t.value?"No se econtraron elementos con el termino: "+t.value:"Sin elementos"," ")}}const ve=()=>[10,20,30];let Te=(()=>{class a{constructor(){this.tableColumns=(0,e.tdS)([]),this.dataSource=(0,e.tdS)(new l.by),this.displayedColumns=(0,e.Flj)(()=>this.tableColumns().map(t=>t.columnDef))}set data(t){this.dataSource.set(new l.by(t)),this.dataSource().paginator=this.paginator,this.dataSource().sort=this.sort}set columns(t){this.tableColumns.set(t)}ngAfterViewInit(){this.dataSource().paginator=this.paginator,this.dataSource().sort=this.sort}applyFilter(t){const n=t.target.value;this.dataSource().filter=n.trim().toLowerCase(),this.dataSource().paginator&&this.dataSource().paginator.firstPage()}static#e=this.\u0275fac=function(n){return new(n||a)};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-table"]],viewQuery:function(n,o){if(1&n&&(e.Gf(N.NW,5),e.Gf(P.YE,5)),2&n){let c;e.iGM(c=e.CRH())&&(o.paginator=c.first),e.iGM(c=e.CRH())&&(o.sort=c.first)}},inputs:{data:"data",columns:"columns"},decls:13,vars:5,consts:[["matInput","","placeholder","Termino a buscar",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Page",3,"pageSizeOptions"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell","p-3"]],template:function(n,o){1&n&&(e.TgZ(0,"mat-form-field")(1,"mat-label"),e._uU(2,"Filtrar"),e.qZA(),e.TgZ(3,"input",0,1),e.NdJ("keyup",function(m){return o.applyFilter(m)}),e.qZA()(),e.TgZ(5,"div",2)(6,"table",3),e.SjG(7,he,3,1,"ng-container",8,e.x6l),e.YNc(9,ge,1,0,"tr",4)(10,fe,1,0,"tr",5)(11,_e,3,1,"tr",6),e.qZA(),e._UZ(12,"mat-paginator",7),e.qZA()),2&n&&(e.xp6(6),e.Q6J("dataSource",o.dataSource()),e.wJu(7,o.tableColumns()),e.xp6(3),e.Q6J("matHeaderRowDef",o.displayedColumns()),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns()),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(4,ve)))},dependencies:[p.KE,p.hX,y.Nt,N.NW,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,l.Ee,P.YE,P.nU],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return a})(),Ze=(()=>{class a{constructor(t,n){this.reportService=t,this.fb=n,this.formSearch=this.fb.group({id_institution:["",i.kI.required],group:["",i.kI.required],participant:["receiver",i.kI.required]}),this.collection=(0,e.tdS)(null),this.displayedColumns=(0,e.Flj)(()=>this.collection()?"communications"===this.collection()?[{columnDef:"dependency",header:"Unidad"},{columnDef:d.Q.Archived,header:"Archivados"},{columnDef:d.Q.Completed,header:"Despachados"},{columnDef:d.Q.Pending,header:"Pendientes"},{columnDef:d.Q.Received,header:"Recibidos"},{columnDef:d.Q.Rejected,header:"Rechazados"}]:[{columnDef:"dependency",header:"Unidad"},{columnDef:g.E.INSCRITO,header:"Inscrito"},{columnDef:g.E.REVISION,header:"En revision"},{columnDef:g.E.OBSERVADO,header:"Observador"},{columnDef:g.E.CONCLUIDO,header:"Concluidos"},{columnDef:g.E.SUSPENDIDO,header:"Suspendidos"},{columnDef:g.E.ANULADO,header:"Anulados"}]:[]),this.institution="",this.institutions=(0,e.tdS)([]),this.dataSource=(0,e.tdS)([]),this.getInstitutions(),(0,e.cEC)(()=>{})}getInstitutions(){this.reportService.getInstitutions().subscribe(t=>{this.institutions.set(t.map(n=>({text:n.nombre,value:n._id})))})}selectInstitution(t){this.formSearch.get("id_institution")?.setValue(t)}generate(){this.reportService.getTotalProceduresByInstitution({...this.formSearch.value,collection:this.collection()}).subscribe(t=>{this.dataSource.set(t)})}get groupProcedure(){return g.X}static#e=this.\u0275fac=function(n){return new(n||a)(e.Y36(f.r),e.Y36(i.qu))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-dashboard-total-communications"]],decls:35,vars:6,consts:[["title","Reporte: Total"],[1,"container","mb-4"],[3,"formGroup"],[1,"row"],[1,"col-12","p-2"],["role","alert",1,"alert","alert-warning","p-3"],[1,"alert-heading"],[1,"col-sm-4"],["placehorder","Seleccione una institucion",3,"options","selectEvent"],[1,"col-sm-2"],[3,"selectionChange"],["value","procedures"],["value","communications"],["mat-button","",3,"click"],["formControlName","group","matNativeControl","","required",""],[3,"value"],[1,"col-sm-12"],[3,"data","columns"],[1,"col-sm-8"]],template:function(n,o){1&n&&(e._UZ(0,"toolbar",0),e.TgZ(1,"div",1)(2,"form",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h4",6),e._uU(7,"AVISO: Generacion de reporte"),e.qZA(),e.TgZ(8,"p"),e._uU(9," Los reportes generados en esta secci\xf3n son extensos y pueden requerir un tiempo considerable para completarse. El tiempo de espera depender\xe1 de la cantidad de datos y usuarios en l\xednea en este momento. "),e.qZA()()(),e.TgZ(10,"div",7)(11,"simple-mat-select-search",8),e.NdJ("selectEvent",function(m){return o.selectInstitution(m)}),e.qZA()(),e.TgZ(12,"div",9)(13,"mat-form-field")(14,"mat-label"),e._uU(15,"Buscar en: "),e.qZA(),e.TgZ(16,"mat-select",10),e.NdJ("selectionChange",function(m){return o.collection.set(m.value)}),e.TgZ(17,"mat-option",11),e._uU(18,"Administracion"),e.qZA(),e.TgZ(19,"mat-option",12),e._uU(20,"Bandejas"),e.qZA()()(),e.TgZ(21,"button",13),e.NdJ("click",function(){return o.generate()}),e._uU(22,"Generar"),e.qZA()(),e.TgZ(23,"div",7)(24,"mat-form-field")(25,"mat-label"),e._uU(26,"Grupo de tramite"),e.qZA(),e.TgZ(27,"mat-select",14)(28,"mat-option",15),e._uU(29,"Tramites externos"),e.qZA(),e.TgZ(30,"mat-option",15),e._uU(31,"Tramites internos"),e.qZA()()()()()(),e.TgZ(32,"div",16),e._UZ(33,"app-table",17),e.qZA(),e._UZ(34,"div",18),e.qZA()),2&n&&(e.xp6(2),e.Q6J("formGroup",o.formSearch),e.xp6(9),e.Q6J("options",o.institutions()),e.xp6(17),e.Q6J("value",o.groupProcedure.EXTERNAL),e.xp6(2),e.Q6J("value",o.groupProcedure.INTERNAL),e.xp6(3),e.Q6J("data",o.dataSource())("columns",o.displayedColumns()))},dependencies:[S.ey,_.lW,p.KE,p.hX,C.gD,i._Y,i.JJ,i.JL,i.Q7,i.sg,i.u,R._,v.n,Te],changeDetection:0})}return a})();var Ae=s(81274);function Se(a,r){if(1&a&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.xp6(1),e.Oqu(t.count)}}function Ce(a,r){if(1&a&&(e.TgZ(0,"tr")(1,"th",3),e._uU(2,"1"),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.SjG(7,Se,2,1,"td",null,e.ikw),e.qZA()),2&a){const t=r.$implicit;e.xp6(4),e.Oqu(null==t._id.funcionario?null:t._id.funcionario.nombre),e.xp6(2),e.Oqu(null==t._id.funcionario?null:t._id.funcionario.paterno),e.wJu(7,t.details)}}let be=(()=>{class a{constructor(t){this.reportService=t,this.datasource=(0,e.tdS)([]),this.reportService.getRankingUsers().subscribe(n=>{this.datasource.set(n)})}static#e=this.\u0275fac=function(n){return new(n||a)(e.Y36(f.r))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-ranking-users"]],decls:15,vars:0,consts:[[1,"table"],["scope","col"],[1,"table-group-divider"],["scope","row"]],template:function(n,o){1&n&&(e.TgZ(0,"p")(1,"mat-toolbar"),e._uU(2,"TOTAL"),e.qZA()(),e.TgZ(3,"table",0)(4,"thead")(5,"tr")(6,"th",1),e._uU(7,"#"),e.qZA(),e.TgZ(8,"th",1),e._uU(9,"Nombre"),e.qZA(),e._UZ(10,"th",1)(11,"th",1),e.qZA()(),e.TgZ(12,"tbody",2),e.SjG(13,Ce,9,2,"tr",null,e.ikw),e.qZA()()),2&n&&e.wJu(13,o.datasource())},dependencies:[Ae.Ye],changeDetection:0})}return a})();var E=s(49488),ye=s(82332);function Ue(a,r){1&a&&(e.TgZ(0,"div",21)(1,"div",22)(2,"mat-form-field")(3,"mat-label"),e._uU(4,"Alterno"),e.qZA(),e._UZ(5,"input",23),e.qZA()(),e.TgZ(6,"div",24)(7,"mat-form-field")(8,"mat-label"),e._uU(9,"GRUPO TRAMITE:"),e.qZA(),e.TgZ(10,"mat-select",25)(11,"mat-option",26),e._uU(12,"TRAMITES EXTERNOS"),e.qZA(),e.TgZ(13,"mat-option",27),e._uU(14,"TRAMITES INTERNOS"),e.qZA()()()()())}function De(a,r){if(1&a&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&a){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Pe(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",21)(1,"div",28)(2,"mat-form-field")(3,"mat-label"),e._uU(4,"Alterno"),e.qZA(),e._UZ(5,"input",23),e.qZA()(),e.TgZ(6,"div",29)(7,"mat-form-field")(8,"mat-label"),e._uU(9,"Cite"),e.qZA(),e._UZ(10,"input",30),e.qZA()(),e.TgZ(11,"div",24)(12,"mat-form-field")(13,"mat-label"),e._uU(14,"Referencia"),e.qZA(),e._UZ(15,"textarea",31),e.qZA()(),e.TgZ(16,"div",28)(17,"mat-form-field")(18,"mat-label"),e._uU(19,"Rango de registro"),e.qZA(),e.TgZ(20,"mat-date-range-input",32),e._UZ(21,"input",33)(22,"input",34),e.qZA(),e.TgZ(23,"mat-hint"),e._uU(24,"DD/MM/YYYY \u2013 DD/MM/YYYY"),e.qZA(),e._UZ(25,"mat-datepicker-toggle",35)(26,"mat-date-range-picker",null,36),e.qZA()()(),e.TgZ(28,"div",37)(29,"div",28)(30,"mat-form-field")(31,"mat-label"),e._uU(32,"GRUPO TRAMITE:"),e.qZA(),e.TgZ(33,"mat-select",25)(34,"mat-option",26),e._uU(35,"TRAMITES EXTERNOS"),e.qZA(),e.TgZ(36,"mat-option",27),e._uU(37,"TRAMITES INTERNOS"),e.qZA()()()(),e.TgZ(38,"div",29)(39,"mat-form-field")(40,"mat-label"),e._uU(41,"Estado:"),e.qZA(),e.TgZ(42,"mat-select",38),e.SjG(43,De,2,2,"mat-option",41,e.ikw),e.qZA()()(),e.TgZ(45,"div",39)(46,"app-server-mat-select-search",40),e.NdJ("keyupEvent",function(o){e.CHM(t);const c=e.oxw(2);return e.KtG(c.searchTypesProcedures(o))})("selectEvent",function(o){e.CHM(t);const c=e.oxw(2);return e.KtG(c.selectTypeProcedure(o))}),e.qZA()()()}if(2&a){const t=e.MAs(27),n=e.oxw(2);e.xp6(20),e.Q6J("rangePicker",t),e.xp6(5),e.Q6J("for",t),e.wJu(43,n.statesProcedure),e.xp6(21),e.Q6J("currentOption",n.currentMatSelectOption)("options",n.types())}}function qe(a,r){1&a&&e._uU(0," unknown search type ")}function Ie(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"div",15)(1,"form",16),e.YNc(2,Ue,15,0)(3,Pe,47,4)(4,qe,1,0),e.qZA(),e._UZ(5,"hr"),e.TgZ(6,"div",17),e._UZ(7,"div",18),e.TgZ(8,"button",19),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.resetForm())}),e._uU(9,"Limpiar"),e.qZA(),e.TgZ(10,"button",20),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.generateReport())}),e._uU(11," BUSCAR "),e.qZA()()()}if(2&a){const t=e.oxw();let n;e.xp6(1),e.Q6J("formGroup",t.formProcedure()),e.xp6(1),e.um2(2,"simple"===(n=t.searchMode())?2:"advanced"===n?3:4),e.xp6(8),e.Q6J("disabled",t.formProcedure().invalid)}}const xe=[{path:"busqueda-tramite",component:(()=>{class a{constructor(t,n,o){this.fb=t,this.reportService=n,this.paginatorService=o,this.panelIsOpened=(0,e.tdS)(!0),this.searchMode=(0,e.tdS)("simple"),this.types=(0,e.tdS)([]),this.formProcedure=(0,e.Flj)(()=>"simple"===this.searchMode()?this.createSimpleForm():this.createAdvancedForm()),this.datasource=(0,e.tdS)([]),this.displaycolums=[{columnDef:"code",header:"Alterno"},{columnDef:"reference",header:"Referencia"},{columnDef:"state",header:"Estado"},{columnDef:"date",header:"Fecha"}],(0,e.f3M)(e.ktI).onDestroy(()=>{this.savePaginationData(),this.paginatorService.keepAliveData=!0})}ngOnInit(){this.loadPaginationData()}searchTypesProcedures(t){this.reportService.getProceduresByText(t).subscribe(n=>{this.types.set(n.map(o=>({value:o._id,text:o.nombre})))})}selectTypeProcedure(t){}search(){this.formProcedure().invalid||this.reportService.searchProcedureByProperties(this.paginatorService.PaginationParams,this.formProcedure().value).subscribe(t=>{this.paginatorService.length=t.length,this.datasource.set(t.procedures)})}generateReport(){this.paginatorService.offset=0,this.search()}get statesProcedure(){return Object.values(g.E)}get currentMatSelectOption(){return this.formProcedure().get("type")?.value}get PageParams(){return{path:"busqueda-avanzada",queryParams:this.paginatorService.PageParams}}selectSearchMode(t){this.panelIsOpened.set(!0),this.searchMode.set(t)}togglePanel(){this.panelIsOpened.update(t=>!t)}resetForm(){this.formProcedure().reset({}),this.datasource.set([])}savePaginationData(){this.paginatorService.cache[this.constructor.name]={form:this.formProcedure().value,types:this.types(),data:this.datasource(),searchMode:this.searchMode(),panelIsOpened:this.panelIsOpened()}}loadPaginationData(){const t=this.paginatorService.cache[this.constructor.name];!this.paginatorService.keepAliveData||!t||(this.searchMode.set(t.searchMode),this.formProcedure().patchValue(t.form),this.types.set(t.types),this.datasource.set(t.data),this.panelIsOpened.set(t.panelIsOpened))}createSimpleForm(){return this.fb.group({code:["",[i.kI.minLength(4),i.kI.required]],group:[""]})}createAdvancedForm(){return this.fb.group({code:["",[i.kI.minLength(4),i.kI.required]],state:[""],reference:[""],type:[""],start:["",i.kI.required],end:[new Date,i.kI.required],group:[""],cite:[""]})}static#e=this.\u0275fac=function(n){return new(n||a)(e.Y36(i.qu),e.Y36(f.r),e.Y36(A.wW))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-search-procedure"]],decls:20,vars:5,consts:[["title","Reporte: Busqueda"],[1,"container-fluid"],[1,"card","bg-transparent"],[1,"card-header","d-flex"],[1,"me-auto","p-2"],[1,"card-title"],["value","simple",3,"change"],["value","simple"],["value","advanced"],["mat-icon-button","",3,"click"],["class","card-body"],[1,"example-container","mat-elevation-z8","mt-2"],[1,"table-container"],[3,"tableColumns","dataSource","navigationParams"],[3,"changePage"],[1,"card-body"],[3,"formGroup"],[1,"d-flex","justify-content-end","button-row"],[1,"flex-grow-1"],["mat-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"row"],[1,"col-sm-8"],["matInput","","formControlName","code"],[1,"col-sm-4"],["formControlName","group"],["value","ExternalDetail"],["value","InternalDetail"],[1,"col-sm-3"],[1,"col-sm-2"],["matInput","","formControlName","cite"],["matInput","","placeholder","Descripcion del tramite","formControlName","reference"],[3,"rangePicker"],["matStartDate","","formControlName","start","placeholder","Fecha inicial"],["matEndDate","","formControlName","end","placeholder","Fecha final"],["matIconSuffix","",3,"for"],["picker",""],[1,"row","mt-2"],["formControlName","state"],[1,"col-sm-7"],["placeholder","Tipo de tramite",3,"currentOption","options","keyupEvent","selectEvent"],[3,"value"]],template:function(n,o){1&n&&(e._UZ(0,"toolbar",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),e._uU(6,"Parametros tramite"),e.qZA()(),e.TgZ(7,"mat-button-toggle-group",6),e.NdJ("change",function(m){return o.selectSearchMode(m.value)}),e.TgZ(8,"mat-button-toggle",7),e._uU(9,"Simple"),e.qZA(),e.TgZ(10,"mat-button-toggle",8),e._uU(11,"Avanzada"),e.qZA()(),e.TgZ(12,"button",9),e.NdJ("click",function(){return o.togglePanel()}),e.TgZ(13,"mat-icon"),e._uU(14),e.qZA()()(),e.YNc(15,Ie,12,3,"div",10),e.qZA(),e.TgZ(16,"div",11)(17,"div",12),e._UZ(18,"app-table-procedure",13),e.qZA(),e.TgZ(19,"app-paginator",14),e.NdJ("changePage",function(){return o.search()}),e.qZA()()()),2&n&&(e.xp6(14),e.Oqu(o.panelIsOpened()?"remove":"add"),e.xp6(1),e.um2(15,o.panelIsOpened()?15:-1),e.xp6(3),e.Q6J("tableColumns",o.displaycolums)("dataSource",o.datasource())("navigationParams",o.PageParams))},dependencies:[S.ey,_.lW,_.RK,E.A9,E.Yi,h.nW,h.wx,h.zY,h.By,h._g,p.KE,p.hX,p.bx,p.R9,I.Hw,y.Nt,C.gD,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,ye.N,U.J,v.n,D],styles:[".button-row[_ngcontent-%COMP%]   .mat-mdc-button-base[_ngcontent-%COMP%]{margin:8px 8px 8px 0}"],changeDetection:0})}return a})()},{path:"solicitante",component:K},{path:"dependientes",component:ce},{path:"unidad",component:me},{path:"total",component:Ze},{path:"ranking",component:be},{path:":path/:group/:id",component:J.J}];let Re=(()=>{class a{static#e=this.\u0275fac=function(n){return new(n||a)};static#t=this.\u0275mod=e.oAB({type:a});static#a=this.\u0275inj=e.cJS({imports:[Z.Bz.forChild(xe),Z.Bz]})}return a})();var Ne=s(65350);let Ee=(()=>{class a{static#e=this.\u0275fac=function(n){return new(n||a)};static#t=this.\u0275mod=e.oAB({type:a});static#a=this.\u0275inj=e.cJS({imports:[T.ez,Re,O.q,i.u5,i.UX,Ne.m]})}return a})()}}]);